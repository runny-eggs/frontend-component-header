{"version":3,"file":"ThemeToggleButton.js","names":["React","getConfig","Cookies","Icon","WbSunny","Nightlight","themeCookie","themeCookieExpiry","ThemeToggleButton","cookies","isThemeToggleEnabled","INDIGO_ENABLE_DARK_TOGGLE","getCookieExpiry","today","Date","getFullYear","getMonth","getDate","getCookieOptions","serverURL","domain","hostname","path","expires","onToggleTheme","URL","LMS_BASE_URL","theme","get","document","body","classList","remove","add","set","learningMFEUnitIframe","getElementById","contentWindow","postMessage","origin","createElement","className","src","htmlFor","id","defaultChecked","onChange","type"],"sources":["../src/ThemeToggleButton.jsx"],"sourcesContent":["import React from 'react';\nimport { getConfig } from '@edx/frontend-platform';\nimport Cookies from 'universal-cookie';\nimport { Icon } from '@openedx/paragon';\nimport { WbSunny, Nightlight } from '@openedx/paragon/icons';\n\nconst themeCookie = 'indigo-toggle-dark';\nconst themeCookieExpiry = 90; // days\n\nconst ThemeToggleButton = () => {\n  const cookies = new Cookies();\n  const isThemeToggleEnabled = getConfig().INDIGO_ENABLE_DARK_TOGGLE;\n\n  const getCookieExpiry = () => {\n    const today = new Date();\n    return new Date(today.getFullYear(), today.getMonth(), today.getDate() + themeCookieExpiry);\n  };\n\n  const getCookieOptions = (serverURL) => ({ domain: serverURL.hostname, path: '/', expires: getCookieExpiry() });\n\n  const onToggleTheme = () => {\n    const serverURL = new URL(getConfig().LMS_BASE_URL);\n    let theme = '';\n\n    if (cookies.get(themeCookie) === 'dark') {\n      document.body.classList.remove('indigo-dark-theme');\n      theme = 'light';\n    } else {\n      document.body.classList.add('indigo-dark-theme');\n      theme = 'dark';\n    }\n    cookies.set(themeCookie, theme, getCookieOptions(serverURL));\n\n    const learningMFEUnitIframe = document.getElementById('unit-iframe');\n    if (learningMFEUnitIframe) {\n      learningMFEUnitIframe.contentWindow.postMessage({ 'indigo-toggle-dark': theme }, serverURL.origin);\n    }\n  };\n\n  if (!isThemeToggleEnabled) {\n    return <div />;\n  }\n\n  return (\n    <div className=\"theme-toggle-button\">\n      <div className=\"light-theme-icon\"><Icon src={WbSunny} /></div>\n      <div className=\"toggle-switch\">\n        <label htmlFor=\"theme-toggle-checkbox\" className=\"switch\">\n          <input id=\"theme-toggle-checkbox\" defaultChecked={cookies.get(themeCookie) === 'dark'} onChange={onToggleTheme} type=\"checkbox\" />\n          <span className=\"slider round\" />\n        </label>\n      </div>\n      <div className=\"dark-theme-icon\"><Icon src={Nightlight} /></div>\n    </div>\n  );\n};\n\nexport default ThemeToggleButton;\n"],"mappings":"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","ignoreList":[]}